<html lang="en"><head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ðŸŽ‰ Happy Birthday! ðŸŽ‚</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Great+Vibes&family=Inter:wght@400;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            overflow: hidden; /* Hide scrollbars caused by canvas */
        }
        .cursive {
            font-family: 'Great Vibes', cursive;
        }
        #hearts-canvas {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
            pointer-events: none;
        }
        .container {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            box-shadow: 0 8px 32px 0 rgba(0, 0, 0, 0.1);
        }
        /* Custom animation for gentle floating effect */
        @keyframes float {
            0% { transform: translateY(0px); }
            50% { transform: translateY(-10px); }
            100% { transform: translateY(0px); }
        }
        .animate-float {
            animation: float 6s ease-in-out infinite;
        }
        .hidden {
            display: none;
        }
        #music-note {
            position: fixed;
            bottom: 0;
            left: 0;
            width: 100%;
            padding: 10px 0;
            z-index: 100;
        }
    </style>
</head>
<body class="bg-gradient-to-br from-rose-900 via-rose-700 to-red-900 text-white min-h-screen flex items-center justify-center p-4 overflow-x-hidden">
    <audio id="background-music" loop>
        <source src="Dil ka jo haal.mp3" type="audio/mpeg">
        Your browser does not support the audio element.
    </audio>
    <canvas id="hearts-canvas"></canvas>

    <div class="container p-10 max-w-lg w-full text-center hover:scale-105 transition-transform duration-300">
        <div class="animate-float">
            <h1 id="main-heading" class="cursive text-5xl lg:text-6xl leading-tight" style="text-shadow: 0 0 15px rgba(255, 255, 255, 0.9), 0 0 30px rgba(255, 99, 71, 0.8), 0 0 45px rgba(255, 0, 0, 0.7);">Huiiiii , Stay Happy forever Becouse Your Smile makes me smile.</h1>
            <div class="typewriter-container">
                <div class="subtitle typewriter-text text-lg mt-4">
                    Wishing you a day filled with joy, laughter, and all your favorite things! Click to begin the celebration! âœ¨
                    <span class="cursor"></span>
                </div>
            </div>
        </div>
        <div id="countdown-container" class="mt-8 text-2xl font-bold">
            <span id="countdown-days"></span> days
            <span id="countdown-hours"></span> hours
            <span id="countdown-minutes"></span> minutes
            <span id="countdown-seconds"></span> seconds
        </div>
        <button id="next-button" class="next-button mt-8 px-8 py-3 bg-white text-rose-700 font-bold rounded-full shadow-lg hover:bg-rose-100 transition-all duration-300 transform hover:scale-110 hidden" onclick="goToNextPage()">Let's Go! âœ¨</button>
    </div>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.11.4/gsap.min.js"></script>
    <script>
        // Function to go to next page
        function goToNextPage() {
            // Add a bounce effect before navigating
            gsap.to('.next-button', {
                scale: 1.2,
                yoyo: true,
                repeat: 1,
                duration: 0.3,
                onComplete: () => {
                    window.location.href = "memorylane.html"; // Move navigation here
                }
            });
        }

        // Function to check date and show button
        function checkDateForButtonVisibility() {
           const now = new Date();
           const targetDate = new Date('2025-10-30T00:00:00'); // October 30th, 2025, 12 AM
           const nextButton = document.getElementById('next-button');
           const countdownContainer = document.getElementById('countdown-container');
           const mainHeading = document.getElementById('main-heading');
           const backgroundMusic = document.getElementById('background-music');
           const musicNote = document.getElementById('music-note');

           const distance = targetDate.getTime() - now.getTime();

           if (distance > 0) {
               // If the target date is in the future (before or on Oct 30th)
               countdownContainer.classList.remove('hidden');
               nextButton.classList.add('hidden');
               
               // Try to play music if before or on Oct 30th (after user interaction)
               // The actual play call will be handled by the user interaction listener

               const days = Math.floor(distance / (1000 * 60 * 60 * 24));
               const hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
               const minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
               const seconds = Math.floor((distance % (1000 * 60)) / 1000);

               document.getElementById('countdown-days').textContent = days;
               document.getElementById('countdown-hours').textContent = hours;
               document.getElementById('countdown-minutes').textContent = minutes;
               document.getElementById('countdown-seconds').textContent = seconds;

               // Set initial heading if not already set
               if (mainHeading.innerHTML !== 'Huiiiii , Dont Forget To Smile Becaouse U R Smile Is Precius.') {
                   mainHeading.innerHTML = 'Huiiiii , Dont Forget To Smile Becaouse U R Smile Is Precius.';
               }
           } else {
               // If the target date has passed (after Oct 30th)
               countdownContainer.classList.add('hidden');
               nextButton.classList.remove('hidden');
               clearInterval(countdownInterval);

               // Pause music after Oct 30th
               if (backgroundMusic && !backgroundMusic.paused) {
                   backgroundMusic.pause();
                   backgroundMusic.currentTime = 0; 
               }

               // Animate heading to "Happy Birthday, Dearest!"
               gsap.to(mainHeading, { 
                   opacity: 0, 
                   duration: 0.5, 
                   onComplete: () => {
                       mainHeading.innerHTML = 'Happy Birthday, </br>Dearest! </br>ðŸŽ‰ðŸŽ‚';
                       gsap.to(mainHeading, { opacity: 1, duration: 0.5, ease: "power2.inOut" });
                   }
               });
           }
        }

        // Update the countdown every 1 second
        let countdownInterval = setInterval(checkDateForButtonVisibility, 1000);

        // Initial call to display the countdown immediately on page load
        window.addEventListener('load', () => {
            checkDateForButtonVisibility();
        });

        // Attempt to play music on first user interaction (e.g., click)
        document.addEventListener('click', function playMusicOnce() {
            const now = new Date();
            const targetDate = new Date('2025-10-30T00:00:00');
            const distance = targetDate.getTime() - now.getTime();
            const backgroundMusic = document.getElementById('background-music');
            const musicNote = document.getElementById('music-note');

            if (backgroundMusic && distance > 0) {
                backgroundMusic.play().catch(e => console.warn("Autoplay prevented:", e));
                // Hide the music note once music starts (or attempts to start)
                if (musicNote) {
                    musicNote.classList.add('hidden');
                }
            }
            // Remove the event listener after the first interaction to avoid repeated attempts
            document.removeEventListener('click', playMusicOnce);
        }, { once: true });

        // Show the music note initially if music is supposed to play
        window.addEventListener('load', () => {
            const now = new Date();
            const targetDate = new Date('2025-10-30T00:00:00');
            const distance = targetDate.getTime() - now.getTime();
            const musicNote = document.getElementById('music-note');
            if (distance > 0 && musicNote) {
                musicNote.classList.remove('hidden');
            }
        });

        // --- Falling Hearts Animation ---
        const canvas = document.getElementById('hearts-canvas');
        const ctx = canvas.getContext('2d');
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;

        let hearts = [];
        const heartCount = 50;

        class Heart {
            constructor() {
                this.reset();
            }

            reset() {
                this.x = Math.random() * canvas.width;
                this.y = Math.random() * -canvas.height;
                this.size = Math.random() * 20 + 10;
                this.speed = Math.random() * 2 + 1;
                this.opacity = Math.random() * 0.5 + 0.3;
            }

            draw() {
                ctx.beginPath();
                ctx.moveTo(this.x, this.y + this.size / 4);
                ctx.bezierCurveTo(this.x, this.y, this.x - this.size / 2, this.y, this.x - this.size / 2, this.y + this.size / 4);
                ctx.bezierCurveTo(this.x - this.size / 2, this.y + this.size / 2, this.x, this.y + this.size / 1.5, this.x, this.y + this.size);
                ctx.bezierCurveTo(this.x, this.y + this.size / 1.5, this.x + this.size / 2, this.y + this.size / 2, this.x + this.size / 2, this.y + this.size / 4);
                ctx.bezierCurveTo(this.x + this.size / 2, this.y, this.x, this.y, this.x, this.y + this.size / 4);
                ctx.fillStyle = `rgba(255, 255, 255, ${this.opacity})`;
                ctx.fill();
                ctx.closePath();
            }

            update() {
                this.y += this.speed;
                if (this.y > canvas.height) {
                    this.reset();
                }
            }
        }

        function initHearts() {
            hearts = [];
            for (let i = 0; i < heartCount; i++) {
                hearts.push(new Heart());
            }
        }

        function animate() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            hearts.forEach(heart => {
                heart.update();
                heart.draw();
            });
            requestAnimationFrame(animate);
        }

        window.addEventListener('resize', () => {
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
            initHearts();
        });

        initHearts();
        animate();
        
        // Add a subtle sparkle effect to the heading
        /* Removed gsap.to('h1', {
            textShadow: "0 0 10px rgba(255, 255, 255, 1), 0 0 20px rgba(255, 255, 255, 0.8), 0 0 30px rgba(255, 99, 71, 0.6)",
            repeat: -1,
            yoyo: true,
            duration: 2
        }); */

        // Responsive adjustments
        function handleResize() {
            // Add responsive adjustments if needed
        }

        window.addEventListener('resize', handleResize);
        handleResize();
    </script>
    <p id="music-note" class="mt-4 text-center text-sm opacity-75 hidden">Click anywhere on the screen to start the music! ðŸŽ¶</p>
</body></html>
